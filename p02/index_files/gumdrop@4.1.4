"use strict";(function(){'use strict';function a(){const a=window.document.querySelector("main");if(a)return a;const b=window.document.querySelector("script"),c=window.document.createElement("main");return b.parentNode.insertBefore(c,b),c}async function b(a){let b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:void 0;// eslint-disable-next-line
const c=window.eval.bind(window);return window.module={},c("(function (module) {\n      ".concat(a,"\n      ").concat(void 0===b?"":"module.exports = ".concat(b,";"),"\n    })(window.module)")),window.module.exports}async function c(a){const b=await B.get("js-yaml"),c=new b.Type("!file",{kind:"scalar",resolve(a){return null!==a},construct(a){return new q(a,"data","yaml")}}),d=b.Schema.create([c]);return b.safeLoad(a,{schema:d})||{}}async function d(a){return JSON.parse(a)}async function e(a){if(a instanceof w){const b=await a.getData();for(const a in b){const c=b[a];c instanceof q&&(b[a]=await f(c))}return a.resolve()}}async function f(a){if(!Object.keys(E).includes(a.type))throw new v("Invalid resource type requested",a);const b=await window.fetch(a.url,{cache:"no-cache"});if(!f.ok)if(404===b.status)throw new t;else if(400===b.status)throw new v;else if(500<=b.status)throw new u;try{const c=await b.text(),{type:d,parse:f}=E[a.type];let g;return"data"===d?g=new x(c,f):"document"===d&&(g=new D(c,f)),await e(g)}catch(a){if(a instanceof s)throw a;throw new u("Invalid content",a)}}async function g(a){const b=new q(a.httpErrorCode,"errors","md");try{return await f(b)}catch(b){return a.message}}async function h(a){const b=new q(a.page,"pages","md"),c=window.setTimeout(function(){r.root.innerHTML=r.loader},G);r.root.innerHTML=await F.get(b),window.clearTimeout(c)}async function i(){if(document.querySelector("pre > code")){const a=await B.get("prismjs");a.highlightAll()}}function j(a){const b=document.querySelectorAll("a[href]");for(const c of b){const b=c.getAttribute("href"),d=new o(b),e=d.page===a.page;d.isAbsolute||(c.setAttribute("href",d.getLinkHref(a.page)),c.classList.toggle("active",e))}}function k(){const a=document.querySelector("h1");document.title=a?"".concat(a.textContent," | ").concat(r.title):"".concat(r.title)}function l(a){const b=document.getElementById(a.fragment);null===b?window.scrollTo({top:0}):b.scrollIntoView({block:"start"})}async function m(a){await h(a),await i(),j(a),k()}const n=/^([^#]*)(#!)?\/?([^#]*)(#)?(.*)$/;class o{constructor(){let a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"";this.url=a;const b=a.match(n);if(null===b)throw new Error("URL parsing failed");else{const[,a,c,d,e,f]=b;this.site=a,this.page=d||"index",this.fragment=window.encodeURI(window.decodeURI(f)),this.isAnchor=!this.isAbsolute&&!c&&e}}get isAbsolute(){return""!==this.site}getLinkHref(a){return this.isAnchor?"#!/".concat(a,"#").concat(this.fragment):this.url}}const p=/^(\/)?(.+?)?(?:\.([^./]+))?$/;class q{constructor(a,b,c){const d=p.exec(a);if(null===d)this.file=a,this.type=c;else{const[,a,e,f]=d;this.file=a?e:"".concat(b,"/").concat(e),this.type=f||c}}get url(){return"".concat(this.file,".").concat(this.type)}}const r={root:a(),title:function(){return window.document.title}(),loader:function(){return a().innerHTML}()};class s extends Error{constructor(a){let b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"Unknown error",c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:"",d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:{};super("<h1>".concat(b,"</h1><strong>").concat(c,"</strong>")),this.httpErrorCode=a,this.details=d}}class t extends s{constructor(){let a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"The page you requested does not exist",b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};super(404,"404 - Not Found",a,b)}}class u extends s{constructor(){let a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};super(500,"500 - Server Error",a,b)}}class v extends s{constructor(){let a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};super(300,"300 - Bad Request",a,b)}}class w{constructor(a){this.parse=a}async resolve(){return""}}class x extends w{constructor(a,b){super(b),this.rawData=a}async getData(){return void 0===this.parsedData?(this.parsedData=await this.parse(this.rawData),this.getData()):this.parsedData}async resolve(){return this.getData()}}var y={extramark:"0.3.2","js-yaml":"3.13.1",mustache:"3.1.0",prismjs:"^1.17.1"};const z={extramark:{version:y.extramark,path:"dist/extramark.min.js",export:"ExtraMark"},mustache:{version:y.mustache,path:"mustache.min.js",export:"Mustache"},prismjs:{version:y.prismjs,path:"prism.min.js",export:"Prism"},"js-yaml":{version:y["js-yaml"],path:"dist/js-yaml.min.js",export:"jsyaml"}},A="https://cdn.jsdelivr.net/npm/",B={_imports:{},async get(a){if(a in this._imports)return this._imports[a];if(!(a in z))throw new Error("Unknown dependency ".concat(a,"."));const c=z[a],d="".concat(a,"@").concat(c.version,"/").concat(c.path),e=await window.fetch(A+d);if(!e.ok){const b="Could not load dependency ".concat(a," from ").concat(A);if(404===e.status)throw new t(b);else if(400===e.status)throw new v(b);else if(500<=e.status)throw new u(b)}const f=await e.text();// eslint-disable-next-line
return this._imports[a]=b(f,c.export),this._imports[a]}},C=/^\x2D\x2D\x2D[\t ]*(\r?\n[\s\S]*?\r?\n|\r?\n)\x2D\x2D\x2D[\t ]*\r?\n([\s\S]*)$/;class D extends w{constructor(a,b){super(b);const e=C.exec(a);if(null===e)this.context=new x("{}",d),this.template=a;else{const[,a,b]=e;this.context=new x(a,c),this.template=b}}async getData(){return this.context.getData()}async resolve(){const a=await B.get("mustache"),b=a.render(this.template,(await this.getData()));return this.parse(b)}}const E={yaml:{type:"data",parse:c},yml:{type:"data",parse:c},json:{type:"data",parse:d},md:{type:"document",parse:async function(a){const b=await B.get("extramark");return b.render(a)}}},F={_resources:{},async get(a){const b=a.url;if(b in this._resources)return this._resources[b];try{// eslint-disable-next-line
this._resources[b]=await f(a)}catch(a){// eslint-disable-next-line
this._resources[b]=await g(a)}return this._resources[b]}},G=500;window.addEventListener("hashchange",async function(a){const b=new o(a.newURL),c=new o(a.oldURL);b.page!==c.page&&(await m(b)),l(b)}),window.addEventListener("load",async function(){const a=new o(window.location.href);await m(a),l(a)})})();
